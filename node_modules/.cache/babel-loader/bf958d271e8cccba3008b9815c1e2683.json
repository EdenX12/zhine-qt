{"remainingRequest":"D:\\Work\\jianpanHt\\jpqt\\node_modules\\thread-loader\\dist\\cjs.js!D:\\Work\\jianpanHt\\jpqt\\node_modules\\babel-loader\\lib\\index.js!D:\\Work\\jianpanHt\\jpqt\\node_modules\\cache-loader\\dist\\cjs.js??ref--0-0!D:\\Work\\jianpanHt\\jpqt\\node_modules\\vue-loader\\lib\\index.js??vue-loader-options!D:\\Work\\jianpanHt\\jpqt\\src\\pages\\user\\UserManage.vue?vue&type=script&lang=js&","dependencies":[{"path":"D:\\Work\\jianpanHt\\jpqt\\src\\pages\\user\\UserManage.vue","mtime":1591608111778},{"path":"D:\\Work\\jianpanHt\\jpqt\\node_modules\\cache-loader\\dist\\cjs.js","mtime":499162500000},{"path":"D:\\Work\\jianpanHt\\jpqt\\node_modules\\thread-loader\\dist\\cjs.js","mtime":499162500000},{"path":"D:\\Work\\jianpanHt\\jpqt\\node_modules\\babel-loader\\lib\\index.js","mtime":499162500000},{"path":"D:\\Work\\jianpanHt\\jpqt\\node_modules\\cache-loader\\dist\\cjs.js","mtime":499162500000},{"path":"D:\\Work\\jianpanHt\\jpqt\\node_modules\\vue-loader\\lib\\index.js","mtime":499162500000}],"contextDependencies":[],"result":["import \"core-js/modules/es6.function.name\";\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\nexport default {\n  name: \"funcModule\",\n  data: function data() {\n    return {\n      dialogCentr: true,\n      labelPosition: \"left\",\n      query: {\n        pageNum: 1,\n        pageSize: 10\n      },\n      tableData: [],\n      pageTotal: 0,\n      statusList: [{\n        id: 0,\n        name: \"可用\"\n      }, {\n        id: 1,\n        name: \"不可用\"\n      }],\n      typeList: [{\n        id: 1,\n        name: \"普通客户(拆家)\"\n      }, {\n        id: 2,\n        name: \"商家\"\n      }],\n      dialogImageUrl: \"\",\n      imgDialogVisible: false,\n      fileLists: [],\n      dialogMessage: \"\",\n      saveForm: {},\n      addOrUpdate: 0,\n      editVisible: false,\n      ruleValidate: {},\n      tableDataLoading: true,\n      userLevelList: [],\n      selectUserId: \"\",\n      couponDrawer: false,\n      couponList: [],\n      innerTableDataLoading: true,\n      saveUserCouponForm: {},\n      innerDrawer: false,\n      innerDrawerTittle: \"\",\n      userCouponAddOrUpdate: 0,\n      detailDataForm: {},\n      expands: []\n    };\n  },\n  created: function created() {\n    this.getTableData();\n    this.getUserLevelList();\n  },\n  methods: {\n    getRowKeys: function getRowKeys(row) {\n      return row.id;\n    },\n    //展开行\n    expandSelect: function expandSelect(row, expandedRows) {\n      var that = this;\n\n      if (expandedRows.length) {\n        that.expands = [];\n\n        if (row) {\n          that.expands.push(row.id);\n          this.getCouponDetailData(row.couponId, row.couponType);\n        }\n      } else {\n        that.expands = [];\n        this.detailDataForm = {};\n      }\n    },\n    //展开行\n    userExpandSelect: function userExpandSelect(row, expandedRows) {\n      var that = this;\n\n      if (expandedRows.length) {\n        that.expands = [];\n\n        if (row) {\n          that.expands.push(row.id);\n        }\n      } else {\n        that.expands = [];\n      }\n    },\n    //用户优惠券详情\n    getCouponDetailData: function getCouponDetailData(id, type) {\n      var _this = this;\n\n      var url = \"/user/getUserCouponDetail\";\n      var params = {\n        couponId: id,\n        couponType: type\n      };\n      this.postRequest(url, params).then(function (resp) {\n        if (resp && resp.status == 200 && resp.data.status == \"200\") {\n          _this.detailDataForm = resp.data.obj;\n        } else {\n          _this.$message(resp.data.msg);\n        }\n      });\n    },\n    //关闭抽屉\n    handleDrawerClose: function handleDrawerClose(done) {\n      this.couponList = [];\n      this.innerTableDataLoading = true;\n      done();\n    },\n\n    /* eslint-disable no-unused-vars */\n    handleInnerDrawerClose: function handleInnerDrawerClose(done) {\n      var _this2 = this;\n\n      this.$confirm(\"确定关闭吗？\").then(function (_) {\n        _this2.resetForm(\"saveUserCouponForm\");\n\n        _this2.saveUserCouponForm = {};\n        done();\n      }).catch(function (_) {});\n    },\n    //保存角色\n    saveUser: function saveUser() {\n      var _this3 = this;\n\n      this.$refs.saveForm.validate(function (valid) {\n        if (valid) {\n          var url = \"\";\n\n          if (_this3.addOrUpdate == 0) {\n            url = \"/user/insertUser\";\n          } else if (_this3.addOrUpdate == 1) {\n            url = \"/user/updateUser\";\n          }\n\n          _this3.saveForm.userImg = _this3.fileLists[0].url;\n          var params = _this3.saveForm;\n\n          _this3.postRequest(url, params).then(function (resp) {\n            if (resp && resp.status == 200 && resp.data.status == \"200\") {\n              _this3.$message.success(\"保存成功\");\n\n              _this3.editVisible = false;\n\n              _this3.getTableData();\n            } else {\n              _this3.$message(\"保存失败\");\n            }\n          });\n        }\n      });\n    },\n    //添加弹出\n    handleAdd: function handleAdd() {\n      this.dialogMessage = \"添加用户\";\n      this.addOrUpdate = 0;\n      this.editVisible = true;\n    },\n    //关闭弹窗\n    closeDialog: function closeDialog() {\n      this.resetForm(\"saveForm\");\n      this.saveForm = {};\n      this.fileLists = [];\n    },\n    resetForm: function resetForm(formName) {\n      this.$refs[formName].clearValidate();\n    },\n    getTableData: function getTableData() {\n      var _this4 = this;\n\n      var url = \"/user/listUser\";\n      this.postRequest(url, this.query).then(function (resp) {\n        if (resp && resp.status == 200 && resp.data.status == \"200\") {\n          _this4.tableData = resp.data.obj.list;\n          _this4.pageTotal = resp.data.obj.total;\n          _this4.tableDataLoading = false;\n        }\n      });\n    },\n    getUserLevelList: function getUserLevelList() {\n      var _this5 = this;\n\n      var url = \"/user/listUserLevel\";\n      this.postRequest(url, this.query).then(function (resp) {\n        if (resp && resp.status == 200 && resp.data.status == \"200\") {\n          _this5.userLevelList = resp.data.obj;\n        }\n      });\n    },\n    //商户优惠券列表数据\n    getCouponTableData: function getCouponTableData(id) {\n      var _this6 = this;\n\n      var url = \"/user/listUserCoupon\";\n      var params = {\n        userId: id\n      };\n      this.postRequest(url, params).then(function (resp) {\n        if (resp && resp.status == 200 && resp.data.status == \"200\") {\n          _this6.couponList = resp.data.obj;\n          _this6.innerTableDataLoading = false;\n        }\n      });\n    },\n    //查看用户优惠券列表\n    // eslint-disable-next-line no-unused-vars\n    handleMore: function handleMore(index, row) {\n      this.selectUserId = row.id;\n      this.couponDrawer = true;\n      this.innerTableDataLoading = true;\n      this.getCouponTableData(row.id);\n    },\n    //编辑弹出\n    handleEdit: function handleEdit(index, row) {\n      this.dialogMessage = \"编辑用户\";\n      this.addOrUpdate = 1;\n      this.idx = index;\n      this.saveForm = JSON.parse(JSON.stringify(row));\n      this.fileLists = [{\n        name: \"\",\n        url: row.userImg\n      }];\n      this.editVisible = true;\n    },\n    // eslint-disable-next-line no-unused-vars\n    tableHeaderColor: function tableHeaderColor(row, rowIndex) {\n      return \"background-color:#EBEEF5;\";\n    },\n    handlePageChange: function handlePageChange(val) {\n      this.tableDataLoading = true;\n      this.$set(this.query, \"pageNum\", val);\n      this.getTableData(this.query);\n    },\n    handleSizeChange: function handleSizeChange(val) {\n      this.tableDataLoading = true;\n      this.$set(this.query, \"pageNum\", 1);\n      this.$set(this.query, \"pageSize\", val);\n      this.getTableData(this.query);\n    },\n    //搜索功能\n    handleSearch: function handleSearch() {\n      this.tableDataLoading = true;\n      this.getTableData();\n    },\n    resetQuery: function resetQuery() {\n      this.query.nickName = null;\n      this.query.userStatus = null;\n      this.query.userType = null;\n      this.tableDataLoading = true;\n      this.getTableData();\n    },\n    // eslint-disable-next-line no-unused-vars\n    statusFormat: function statusFormat(row, column) {\n      if (row.couponStatus == 0) {\n        return \"未使用\";\n      } else if (row.couponStatus == 1) {\n        return \"已使用\";\n      } else if (row.couponStatus == 2) {\n        return \"过期\";\n      }\n    },\n    userStatusFormat: function userStatusFormat(row, column) {\n      if (row.userStatus == 0) {\n        return \"可用\";\n      } else if (row.userStatus == 1) {\n        return \"不可用\";\n      }\n    },\n    userStatusFormatRe: function userStatusFormatRe(userStatus) {\n      if (userStatus == 0) {\n        return \"可用\";\n      } else if (userStatus == 1) {\n        return \"不可用\";\n      }\n    },\n    // eslint-disable-next-line no-unused-vars\n    typeFormat: function typeFormat(row, column) {\n      if (row.couponType == 0) {\n        return \"任务金\";\n      } else if (row.couponType == 1) {\n        return \"商铺券\";\n      }\n    },\n    userTypeFormat: function userTypeFormat(row, column) {\n      if (row.userType == 1) {\n        return \"普通客户(拆家)\";\n      } else if (row.userType == 2) {\n        return \"商家\";\n      }\n    },\n    // eslint-disable-next-line no-unused-vars\n    createDateFormat: function createDateFormat(row, column) {\n      return this.dateFormat(row.createTime);\n    },\n    // eslint-disable-next-line no-unused-vars\n    dateFormat: function dateFormat(date) {\n      if (date === null) {\n        return null;\n      }\n\n      var d = new Date(date); //val 为表格内取到的后台时间\n\n      var month = d.getMonth() + 1 < 10 ? \"0\" + (d.getMonth() + 1) : d.getMonth() + 1;\n      var day = d.getDate() < 10 ? \"0\" + d.getDate() : d.getDate();\n      var hours = d.getHours() < 10 ? \"0\" + d.getHours() : d.getHours();\n      var min = d.getMinutes() < 10 ? \"0\" + d.getMinutes() : d.getMinutes();\n      var sec = d.getSeconds() < 10 ? \"0\" + d.getSeconds() : d.getSeconds();\n      var times = d.getFullYear() + \"-\" + month + \"-\" + day + \" \" + hours + \":\" + min + \":\" + sec;\n      return times;\n    },\n    //删除图片\n    // eslint-disable-next-line no-unused-vars\n    handleRemove: function handleRemove(file, fileList) {\n      this.fileLists = [];\n    },\n    //查看大图\n    handlePictureCardPreview: function handlePictureCardPreview(file) {\n      this.dialogImageUrl = file.url;\n      this.imgDialogVisible = true;\n    },\n    //图片上传成功\n    // eslint-disable-next-line no-unused-vars\n    success: function success(response, file, fileList) {\n      this.fileLists = [{\n        name: file.name,\n        url: response.url\n      }];\n    },\n    // eslint-disable-next-line no-unused-vars\n    handleExceed: function handleExceed(files, fileList) {\n      this.$message.warning(\"\\u8BF7\\u6700\\u591A\\u4E0A\\u4F20\\u4E00\\u4E2A\\u56FE\\u7247\\u3002\");\n    }\n  }\n};",{"version":3,"sources":["UserManage.vue"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AAgRA,eAAA;AACA,EAAA,IAAA,EAAA,YADA;AAEA,EAAA,IAFA,kBAEA;AACA,WAAA;AACA,MAAA,WAAA,EAAA,IADA;AAEA,MAAA,aAAA,EAAA,MAFA;AAGA,MAAA,KAAA,EAAA;AACA,QAAA,OAAA,EAAA,CADA;AAEA,QAAA,QAAA,EAAA;AAFA,OAHA;AAOA,MAAA,SAAA,EAAA,EAPA;AAQA,MAAA,SAAA,EAAA,CARA;AASA,MAAA,UAAA,EAAA,CACA;AAAA,QAAA,EAAA,EAAA,CAAA;AAAA,QAAA,IAAA,EAAA;AAAA,OADA,EAEA;AAAA,QAAA,EAAA,EAAA,CAAA;AAAA,QAAA,IAAA,EAAA;AAAA,OAFA,CATA;AAaA,MAAA,QAAA,EAAA,CACA;AAAA,QAAA,EAAA,EAAA,CAAA;AAAA,QAAA,IAAA,EAAA;AAAA,OADA,EAEA;AAAA,QAAA,EAAA,EAAA,CAAA;AAAA,QAAA,IAAA,EAAA;AAAA,OAFA,CAbA;AAiBA,MAAA,cAAA,EAAA,EAjBA;AAkBA,MAAA,gBAAA,EAAA,KAlBA;AAmBA,MAAA,SAAA,EAAA,EAnBA;AAoBA,MAAA,aAAA,EAAA,EApBA;AAqBA,MAAA,QAAA,EAAA,EArBA;AAsBA,MAAA,WAAA,EAAA,CAtBA;AAuBA,MAAA,WAAA,EAAA,KAvBA;AAwBA,MAAA,YAAA,EAAA,EAxBA;AAyBA,MAAA,gBAAA,EAAA,IAzBA;AA0BA,MAAA,aAAA,EAAA,EA1BA;AA2BA,MAAA,YAAA,EAAA,EA3BA;AA4BA,MAAA,YAAA,EAAA,KA5BA;AA6BA,MAAA,UAAA,EAAA,EA7BA;AA8BA,MAAA,qBAAA,EAAA,IA9BA;AA+BA,MAAA,kBAAA,EAAA,EA/BA;AAgCA,MAAA,WAAA,EAAA,KAhCA;AAiCA,MAAA,iBAAA,EAAA,EAjCA;AAkCA,MAAA,qBAAA,EAAA,CAlCA;AAmCA,MAAA,cAAA,EAAA,EAnCA;AAoCA,MAAA,OAAA,EAAA;AApCA,KAAA;AAsCA,GAzCA;AA0CA,EAAA,OA1CA,qBA0CA;AACA,SAAA,YAAA;AACA,SAAA,gBAAA;AACA,GA7CA;AA8CA,EAAA,OAAA,EAAA;AACA,IAAA,UADA,sBACA,GADA,EACA;AACA,aAAA,GAAA,CAAA,EAAA;AACA,KAHA;AAIA;AACA,IAAA,YALA,wBAKA,GALA,EAKA,YALA,EAKA;AACA,UAAA,IAAA,GAAA,IAAA;;AACA,UAAA,YAAA,CAAA,MAAA,EAAA;AACA,QAAA,IAAA,CAAA,OAAA,GAAA,EAAA;;AACA,YAAA,GAAA,EAAA;AACA,UAAA,IAAA,CAAA,OAAA,CAAA,IAAA,CAAA,GAAA,CAAA,EAAA;AACA,eAAA,mBAAA,CAAA,GAAA,CAAA,QAAA,EAAA,GAAA,CAAA,UAAA;AACA;AACA,OANA,MAMA;AACA,QAAA,IAAA,CAAA,OAAA,GAAA,EAAA;AACA,aAAA,cAAA,GAAA,EAAA;AACA;AACA,KAjBA;AAkBA;AACA,IAAA,gBAnBA,4BAmBA,GAnBA,EAmBA,YAnBA,EAmBA;AACA,UAAA,IAAA,GAAA,IAAA;;AACA,UAAA,YAAA,CAAA,MAAA,EAAA;AACA,QAAA,IAAA,CAAA,OAAA,GAAA,EAAA;;AACA,YAAA,GAAA,EAAA;AACA,UAAA,IAAA,CAAA,OAAA,CAAA,IAAA,CAAA,GAAA,CAAA,EAAA;AACA;AACA,OALA,MAKA;AACA,QAAA,IAAA,CAAA,OAAA,GAAA,EAAA;AACA;AACA,KA7BA;AA8BA;AACA,IAAA,mBA/BA,+BA+BA,EA/BA,EA+BA,IA/BA,EA+BA;AAAA;;AACA,UAAA,GAAA,GAAA,2BAAA;AACA,UAAA,MAAA,GAAA;AAAA,QAAA,QAAA,EAAA,EAAA;AAAA,QAAA,UAAA,EAAA;AAAA,OAAA;AACA,WAAA,WAAA,CAAA,GAAA,EAAA,MAAA,EAAA,IAAA,CAAA,UAAA,IAAA,EAAA;AACA,YAAA,IAAA,IAAA,IAAA,CAAA,MAAA,IAAA,GAAA,IAAA,IAAA,CAAA,IAAA,CAAA,MAAA,IAAA,KAAA,EAAA;AACA,UAAA,KAAA,CAAA,cAAA,GAAA,IAAA,CAAA,IAAA,CAAA,GAAA;AACA,SAFA,MAEA;AACA,UAAA,KAAA,CAAA,QAAA,CAAA,IAAA,CAAA,IAAA,CAAA,GAAA;AACA;AACA,OANA;AAOA,KAzCA;AA0CA;AACA,IAAA,iBA3CA,6BA2CA,IA3CA,EA2CA;AACA,WAAA,UAAA,GAAA,EAAA;AACA,WAAA,qBAAA,GAAA,IAAA;AACA,MAAA,IAAA;AACA,KA/CA;;AAgDA;AACA,IAAA,sBAjDA,kCAiDA,IAjDA,EAiDA;AAAA;;AACA,WAAA,QAAA,CAAA,QAAA,EACA,IADA,CACA,UAAA,CAAA,EAAA;AACA,QAAA,MAAA,CAAA,SAAA,CAAA,oBAAA;;AACA,QAAA,MAAA,CAAA,kBAAA,GAAA,EAAA;AACA,QAAA,IAAA;AACA,OALA,EAMA,KANA,CAMA,UAAA,CAAA,EAAA,CAAA,CANA;AAOA,KAzDA;AA0DA;AACA,IAAA,QA3DA,sBA2DA;AAAA;;AACA,WAAA,KAAA,CAAA,QAAA,CAAA,QAAA,CAAA,UAAA,KAAA,EAAA;AACA,YAAA,KAAA,EAAA;AACA,cAAA,GAAA,GAAA,EAAA;;AACA,cAAA,MAAA,CAAA,WAAA,IAAA,CAAA,EAAA;AACA,YAAA,GAAA,GAAA,kBAAA;AACA,WAFA,MAEA,IAAA,MAAA,CAAA,WAAA,IAAA,CAAA,EAAA;AACA,YAAA,GAAA,GAAA,kBAAA;AACA;;AACA,UAAA,MAAA,CAAA,QAAA,CAAA,OAAA,GAAA,MAAA,CAAA,SAAA,CAAA,CAAA,EAAA,GAAA;AACA,cAAA,MAAA,GAAA,MAAA,CAAA,QAAA;;AACA,UAAA,MAAA,CAAA,WAAA,CAAA,GAAA,EAAA,MAAA,EAAA,IAAA,CAAA,UAAA,IAAA,EAAA;AACA,gBAAA,IAAA,IAAA,IAAA,CAAA,MAAA,IAAA,GAAA,IAAA,IAAA,CAAA,IAAA,CAAA,MAAA,IAAA,KAAA,EAAA;AACA,cAAA,MAAA,CAAA,QAAA,CAAA,OAAA,CAAA,MAAA;;AACA,cAAA,MAAA,CAAA,WAAA,GAAA,KAAA;;AACA,cAAA,MAAA,CAAA,YAAA;AACA,aAJA,MAIA;AACA,cAAA,MAAA,CAAA,QAAA,CAAA,MAAA;AACA;AACA,WARA;AASA;AACA,OApBA;AAqBA,KAjFA;AAkFA;AACA,IAAA,SAnFA,uBAmFA;AACA,WAAA,aAAA,GAAA,MAAA;AACA,WAAA,WAAA,GAAA,CAAA;AACA,WAAA,WAAA,GAAA,IAAA;AACA,KAvFA;AAwFA;AACA,IAAA,WAzFA,yBAyFA;AACA,WAAA,SAAA,CAAA,UAAA;AACA,WAAA,QAAA,GAAA,EAAA;AACA,WAAA,SAAA,GAAA,EAAA;AACA,KA7FA;AA8FA,IAAA,SA9FA,qBA8FA,QA9FA,EA8FA;AACA,WAAA,KAAA,CAAA,QAAA,EAAA,aAAA;AACA,KAhGA;AAiGA,IAAA,YAjGA,0BAiGA;AAAA;;AACA,UAAA,GAAA,GAAA,gBAAA;AACA,WAAA,WAAA,CAAA,GAAA,EAAA,KAAA,KAAA,EAAA,IAAA,CAAA,UAAA,IAAA,EAAA;AACA,YAAA,IAAA,IAAA,IAAA,CAAA,MAAA,IAAA,GAAA,IAAA,IAAA,CAAA,IAAA,CAAA,MAAA,IAAA,KAAA,EAAA;AACA,UAAA,MAAA,CAAA,SAAA,GAAA,IAAA,CAAA,IAAA,CAAA,GAAA,CAAA,IAAA;AACA,UAAA,MAAA,CAAA,SAAA,GAAA,IAAA,CAAA,IAAA,CAAA,GAAA,CAAA,KAAA;AACA,UAAA,MAAA,CAAA,gBAAA,GAAA,KAAA;AACA;AACA,OANA;AAOA,KA1GA;AA2GA,IAAA,gBA3GA,8BA2GA;AAAA;;AACA,UAAA,GAAA,GAAA,qBAAA;AACA,WAAA,WAAA,CAAA,GAAA,EAAA,KAAA,KAAA,EAAA,IAAA,CAAA,UAAA,IAAA,EAAA;AACA,YAAA,IAAA,IAAA,IAAA,CAAA,MAAA,IAAA,GAAA,IAAA,IAAA,CAAA,IAAA,CAAA,MAAA,IAAA,KAAA,EAAA;AACA,UAAA,MAAA,CAAA,aAAA,GAAA,IAAA,CAAA,IAAA,CAAA,GAAA;AACA;AACA,OAJA;AAKA,KAlHA;AAmHA;AACA,IAAA,kBApHA,8BAoHA,EApHA,EAoHA;AAAA;;AACA,UAAA,GAAA,GAAA,sBAAA;AACA,UAAA,MAAA,GAAA;AAAA,QAAA,MAAA,EAAA;AAAA,OAAA;AACA,WAAA,WAAA,CAAA,GAAA,EAAA,MAAA,EAAA,IAAA,CAAA,UAAA,IAAA,EAAA;AACA,YAAA,IAAA,IAAA,IAAA,CAAA,MAAA,IAAA,GAAA,IAAA,IAAA,CAAA,IAAA,CAAA,MAAA,IAAA,KAAA,EAAA;AACA,UAAA,MAAA,CAAA,UAAA,GAAA,IAAA,CAAA,IAAA,CAAA,GAAA;AACA,UAAA,MAAA,CAAA,qBAAA,GAAA,KAAA;AACA;AACA,OALA;AAMA,KA7HA;AA8HA;AACA;AACA,IAAA,UAhIA,sBAgIA,KAhIA,EAgIA,GAhIA,EAgIA;AACA,WAAA,YAAA,GAAA,GAAA,CAAA,EAAA;AACA,WAAA,YAAA,GAAA,IAAA;AACA,WAAA,qBAAA,GAAA,IAAA;AACA,WAAA,kBAAA,CAAA,GAAA,CAAA,EAAA;AACA,KArIA;AAsIA;AACA,IAAA,UAvIA,sBAuIA,KAvIA,EAuIA,GAvIA,EAuIA;AACA,WAAA,aAAA,GAAA,MAAA;AACA,WAAA,WAAA,GAAA,CAAA;AACA,WAAA,GAAA,GAAA,KAAA;AACA,WAAA,QAAA,GAAA,IAAA,CAAA,KAAA,CAAA,IAAA,CAAA,SAAA,CAAA,GAAA,CAAA,CAAA;AACA,WAAA,SAAA,GAAA,CACA;AACA,QAAA,IAAA,EAAA,EADA;AAEA,QAAA,GAAA,EAAA,GAAA,CAAA;AAFA,OADA,CAAA;AAMA,WAAA,WAAA,GAAA,IAAA;AACA,KAnJA;AAoJA;AACA,IAAA,gBArJA,4BAqJA,GArJA,EAqJA,QArJA,EAqJA;AACA,aAAA,2BAAA;AACA,KAvJA;AAwJA,IAAA,gBAxJA,4BAwJA,GAxJA,EAwJA;AACA,WAAA,gBAAA,GAAA,IAAA;AACA,WAAA,IAAA,CAAA,KAAA,KAAA,EAAA,SAAA,EAAA,GAAA;AACA,WAAA,YAAA,CAAA,KAAA,KAAA;AACA,KA5JA;AA6JA,IAAA,gBA7JA,4BA6JA,GA7JA,EA6JA;AACA,WAAA,gBAAA,GAAA,IAAA;AACA,WAAA,IAAA,CAAA,KAAA,KAAA,EAAA,SAAA,EAAA,CAAA;AACA,WAAA,IAAA,CAAA,KAAA,KAAA,EAAA,UAAA,EAAA,GAAA;AACA,WAAA,YAAA,CAAA,KAAA,KAAA;AACA,KAlKA;AAmKA;AACA,IAAA,YApKA,0BAoKA;AACA,WAAA,gBAAA,GAAA,IAAA;AACA,WAAA,YAAA;AACA,KAvKA;AAwKA,IAAA,UAxKA,wBAwKA;AACA,WAAA,KAAA,CAAA,QAAA,GAAA,IAAA;AACA,WAAA,KAAA,CAAA,UAAA,GAAA,IAAA;AACA,WAAA,KAAA,CAAA,QAAA,GAAA,IAAA;AACA,WAAA,gBAAA,GAAA,IAAA;AACA,WAAA,YAAA;AACA,KA9KA;AA+KA;AACA,IAAA,YAhLA,wBAgLA,GAhLA,EAgLA,MAhLA,EAgLA;AACA,UAAA,GAAA,CAAA,YAAA,IAAA,CAAA,EAAA;AACA,eAAA,KAAA;AACA,OAFA,MAEA,IAAA,GAAA,CAAA,YAAA,IAAA,CAAA,EAAA;AACA,eAAA,KAAA;AACA,OAFA,MAEA,IAAA,GAAA,CAAA,YAAA,IAAA,CAAA,EAAA;AACA,eAAA,IAAA;AACA;AACA,KAxLA;AAyLA,IAAA,gBAzLA,4BAyLA,GAzLA,EAyLA,MAzLA,EAyLA;AACA,UAAA,GAAA,CAAA,UAAA,IAAA,CAAA,EAAA;AACA,eAAA,IAAA;AACA,OAFA,MAEA,IAAA,GAAA,CAAA,UAAA,IAAA,CAAA,EAAA;AACA,eAAA,KAAA;AACA;AACA,KA/LA;AAgMA,IAAA,kBAhMA,8BAgMA,UAhMA,EAgMA;AACA,UAAA,UAAA,IAAA,CAAA,EAAA;AACA,eAAA,IAAA;AACA,OAFA,MAEA,IAAA,UAAA,IAAA,CAAA,EAAA;AACA,eAAA,KAAA;AACA;AACA,KAtMA;AAuMA;AACA,IAAA,UAxMA,sBAwMA,GAxMA,EAwMA,MAxMA,EAwMA;AACA,UAAA,GAAA,CAAA,UAAA,IAAA,CAAA,EAAA;AACA,eAAA,KAAA;AACA,OAFA,MAEA,IAAA,GAAA,CAAA,UAAA,IAAA,CAAA,EAAA;AACA,eAAA,KAAA;AACA;AACA,KA9MA;AA+MA,IAAA,cA/MA,0BA+MA,GA/MA,EA+MA,MA/MA,EA+MA;AACA,UAAA,GAAA,CAAA,QAAA,IAAA,CAAA,EAAA;AACA,eAAA,UAAA;AACA,OAFA,MAEA,IAAA,GAAA,CAAA,QAAA,IAAA,CAAA,EAAA;AACA,eAAA,IAAA;AACA;AACA,KArNA;AAsNA;AACA,IAAA,gBAvNA,4BAuNA,GAvNA,EAuNA,MAvNA,EAuNA;AACA,aAAA,KAAA,UAAA,CAAA,GAAA,CAAA,UAAA,CAAA;AACA,KAzNA;AA0NA;AACA,IAAA,UA3NA,sBA2NA,IA3NA,EA2NA;AACA,UAAA,IAAA,KAAA,IAAA,EAAA;AACA,eAAA,IAAA;AACA;;AACA,UAAA,CAAA,GAAA,IAAA,IAAA,CAAA,IAAA,CAAA,CAJA,CAIA;;AACA,UAAA,KAAA,GACA,CAAA,CAAA,QAAA,KAAA,CAAA,GAAA,EAAA,GAAA,OAAA,CAAA,CAAA,QAAA,KAAA,CAAA,CAAA,GAAA,CAAA,CAAA,QAAA,KAAA,CADA;AAEA,UAAA,GAAA,GAAA,CAAA,CAAA,OAAA,KAAA,EAAA,GAAA,MAAA,CAAA,CAAA,OAAA,EAAA,GAAA,CAAA,CAAA,OAAA,EAAA;AACA,UAAA,KAAA,GAAA,CAAA,CAAA,QAAA,KAAA,EAAA,GAAA,MAAA,CAAA,CAAA,QAAA,EAAA,GAAA,CAAA,CAAA,QAAA,EAAA;AACA,UAAA,GAAA,GAAA,CAAA,CAAA,UAAA,KAAA,EAAA,GAAA,MAAA,CAAA,CAAA,UAAA,EAAA,GAAA,CAAA,CAAA,UAAA,EAAA;AACA,UAAA,GAAA,GAAA,CAAA,CAAA,UAAA,KAAA,EAAA,GAAA,MAAA,CAAA,CAAA,UAAA,EAAA,GAAA,CAAA,CAAA,UAAA,EAAA;AACA,UAAA,KAAA,GACA,CAAA,CAAA,WAAA,KACA,GADA,GAEA,KAFA,GAGA,GAHA,GAIA,GAJA,GAKA,GALA,GAMA,KANA,GAOA,GAPA,GAQA,GARA,GASA,GATA,GAUA,GAXA;AAYA,aAAA,KAAA;AACA,KAnPA;AAoPA;AACA;AACA,IAAA,YAtPA,wBAsPA,IAtPA,EAsPA,QAtPA,EAsPA;AACA,WAAA,SAAA,GAAA,EAAA;AACA,KAxPA;AAyPA;AACA,IAAA,wBA1PA,oCA0PA,IA1PA,EA0PA;AACA,WAAA,cAAA,GAAA,IAAA,CAAA,GAAA;AACA,WAAA,gBAAA,GAAA,IAAA;AACA,KA7PA;AA8PA;AACA;AACA,IAAA,OAhQA,mBAgQA,QAhQA,EAgQA,IAhQA,EAgQA,QAhQA,EAgQA;AACA,WAAA,SAAA,GAAA,CACA;AACA,QAAA,IAAA,EAAA,IAAA,CAAA,IADA;AAEA,QAAA,GAAA,EAAA,QAAA,CAAA;AAFA,OADA,CAAA;AAMA,KAvQA;AAwQA;AACA,IAAA,YAzQA,wBAyQA,KAzQA,EAyQA,QAzQA,EAyQA;AACA,WAAA,QAAA,CAAA,OAAA;AACA;AA3QA;AA9CA,CAAA","sourcesContent":["<template>\r\n  <div style=\"margin-top:10px\">\r\n    <div class=\"container\">\r\n      <!--搜索条件-->\r\n      <div class=\"handle-box\">\r\n        <el-input v-model=\"query.nickName\" placeholder=\"请输入用户昵称\" class=\"name-input\"></el-input>\r\n        <el-select v-model=\"query.userStatus\" placeholder=\"请选择用户状态\" class=\"status-select\">\r\n          <el-option v-for=\"item in statusList\" :key=\"item.id\" :label=\"item.name\" :value=\"item.id\"></el-option>\r\n        </el-select>\r\n        <el-select v-model=\"query.userType\" placeholder=\"请选择用户类型\" class=\"status-select\">\r\n          <el-option v-for=\"item in typeList\" :key=\"item.id\" :label=\"item.name\" :value=\"item.id\"></el-option>\r\n        </el-select>\r\n        <el-button type=\"primary\" round icon=\"el-icon-search\" @click=\"handleSearch()\">搜索</el-button>\r\n        <el-button type=\"danger\" round icon=\"el-icon-refresh\" @click=\"resetQuery()\">重置</el-button>\r\n        <!-- <el-button type=\"primary\" round icon=\"el-icon-circle-plus-outline\" @click=\"handleAdd()\">添加</el-button> -->\r\n      </div>\r\n      <!--数据表单-->\r\n      <el-table\r\n        :data=\"tableData\"\r\n        :header-cell-style=\"tableHeaderColor\"\r\n        class=\"table\"\r\n        ref=\"multipleTable\"\r\n        header-cell-class-name=\"table-header\"\r\n        v-loading=\"tableDataLoading\"\r\n        @expand-change=\"userExpandSelect\"\r\n        :row-key=\"getRowKeys\"\r\n        :expand-row-keys=\"expands\"\r\n      >\r\n        <el-table-column type=\"expand\">\r\n          <template slot-scope=\"props\">\r\n            <el-form label-position=\"left\" class=\"demo-table-expand\">\r\n              <el-form-item label=\"订单单数:\">\r\n                <span>{{ props.row.orderNum }}</span>\r\n              </el-form-item>\r\n              <el-form-item label=\"订单金额:\">\r\n                <span>{{ props.row.orderAmount }}</span>\r\n              </el-form-item>\r\n              <el-form-item label=\"用户状态:\">\r\n                <span>{{ userStatusFormatRe(props.row.userStatus) }}</span>\r\n              </el-form-item>\r\n              <el-form-item label=\"创建时间:\">\r\n                <span>{{ dateFormat(props.row.createTime) }}</span>\r\n              </el-form-item>\r\n            </el-form>\r\n          </template>\r\n        </el-table-column>\r\n        <el-table-column label=\"序号\" type=\"index\" width=\"50\" align=\"center\"></el-table-column>\r\n        <el-table-column label=\"头像\" width=\"80px\" align=\"center\">\r\n          <template slot-scope=\"scope\">\r\n            <el-image\r\n              class=\"table-module-img\"\r\n              :src=\"scope.row.userImg\"\r\n              :preview-src-list=\"[scope.row.userImg]\"\r\n            ></el-image>\r\n          </template>\r\n        </el-table-column>\r\n        <el-table-column prop=\"nickName\" label=\"用户昵称\" align=\"center\"></el-table-column>\r\n        <el-table-column prop=\"userPhone\" label=\"手机号码\" align=\"center\" width=\"110px\"></el-table-column>\r\n        <el-table-column prop=\"totalAmount\" label=\"余额\" align=\"center\" width=\"50px\"></el-table-column>\r\n        <el-table-column prop=\"lockAmount\" label=\"冻结金额\" align=\"center\" width=\"80px\"></el-table-column>\r\n        <el-table-column prop=\"rewardBean\" label=\"猎豆余额\" align=\"center\" width=\"100px\" sortable></el-table-column>\r\n        <el-table-column prop=\"taskNum\" label=\"拆单单数\" align=\"center\" width=\"80px\"></el-table-column>\r\n        <el-table-column prop=\"taskNumSum\" label=\"拆单份数\" align=\"center\" width=\"80px\"></el-table-column>\r\n        <el-table-column prop=\"taskAmount\" label=\"拆单金额\" align=\"center\" width=\"80px\"></el-table-column>\r\n        <el-table-column\r\n          prop=\"userType\"\r\n          label=\"用户类型\"\r\n          :formatter=\"userTypeFormat\"\r\n          align=\"center\"\r\n          width=\"80px\"\r\n        ></el-table-column>\r\n        <el-table-column prop=\"userLevelTypeName\" label=\"等级\" align=\"center\" width=\"100px\"></el-table-column>\r\n        <el-table-column label=\"操作\" align=\"center\">\r\n          <template slot-scope=\"scope\">\r\n            <el-button\r\n              type=\"primary\"\r\n              icon=\"el-icon-more-outline\"\r\n              circle\r\n              @click=\"handleMore(scope.$index, scope.row)\"\r\n            ></el-button>\r\n            <el-button\r\n              type=\"primary\"\r\n              icon=\"el-icon-edit\"\r\n              circle\r\n              @click=\"handleEdit(scope.$index, scope.row)\"\r\n            ></el-button>\r\n            <!-- <el-button\r\n              type=\"danger\"\r\n              icon=\"el-icon-delete\"\r\n              circle\r\n              @click=\"handleDelete(scope.$index, scope.row)\"\r\n            ></el-button>-->\r\n          </template>\r\n        </el-table-column>\r\n      </el-table>\r\n      <!-- 分页 -->\r\n      <div class=\"pagination\">\r\n        <el-pagination\r\n          background\r\n          layout=\"total, sizes, prev, pager, next, jumper\"\r\n          :current-page=\"query.pageNum\"\r\n          :page-sizes=\"[10, 50, 100, 500]\"\r\n          :page-size=\"query.pageSize\"\r\n          :total=\"pageTotal\"\r\n          @size-change=\"handleSizeChange\"\r\n          @current-change=\"handlePageChange\"\r\n        ></el-pagination>\r\n      </div>\r\n      <!-- 弹出框 -->\r\n      <el-dialog\r\n        :title=\"dialogMessage\"\r\n        :visible.sync=\"editVisible\"\r\n        :center=\"dialogCentr\"\r\n        @close=\"closeDialog\"\r\n      >\r\n        <el-form\r\n          :rules=\"ruleValidate\"\r\n          ref=\"saveForm\"\r\n          :model=\"saveForm\"\r\n          :inline=\"true\"\r\n          :lable-position=\"labelPosition\"\r\n          label-width=\"120px\"\r\n        >\r\n          <el-form-item label=\"账户状态\" prop=\"moduleStatus\">\r\n            <el-select v-model=\"saveForm.userStatus\" placeholder=\"请选择状态\" suffix-icon=\"“xxxx”\">\r\n              <el-option\r\n                v-for=\"item in statusList\"\r\n                :key=\"item.id\"\r\n                :label=\"item.name\"\r\n                :value=\"item.id\"\r\n              ></el-option>\r\n            </el-select>\r\n          </el-form-item>\r\n          <el-form-item label=\"用户等级\" prop=\"moduleStatus\">\r\n            <el-select v-model=\"saveForm.userLevelType\" placeholder=\"请选择状态\" suffix-icon=\"“xxxx”\">\r\n              <el-option\r\n                v-for=\"item in userLevelList\"\r\n                :key=\"item.id\"\r\n                :label=\"item.levelName\"\r\n                :value=\"item.levelType\"\r\n              ></el-option>\r\n            </el-select>\r\n          </el-form-item>\r\n        </el-form>\r\n        <div slot=\"footer\" class=\"dialog-footer\">\r\n          <el-button type=\"primary\" @click=\"saveUser()\">确定</el-button>\r\n          <el-button @click=\"editVisible = false\">取消</el-button>\r\n        </div>\r\n      </el-dialog>\r\n      <!-- 抽屉列表 -->\r\n      <el-drawer\r\n        :visible.sync=\"couponDrawer\"\r\n        direction=\"rtl\"\r\n        size=\"60%\"\r\n        :destroy-on-close=\"true\"\r\n        :withHeader=\"false\"\r\n        :before-close=\"handleDrawerClose\"\r\n      >\r\n        <div style=\"margin-left:10px;margin-top:10px;\">\r\n          <!--搜索-->\r\n          <!-- <div class=\"handle-box\">\r\n            <el-button\r\n              type=\"primary\"\r\n              round\r\n              icon=\"el-icon-circle-plus-outline\"\r\n              @click=\"handleCouponAdd()\"\r\n            >添加优惠券</el-button>\r\n          </div>-->\r\n          <!--数据-->\r\n          <el-table\r\n            :data=\"couponList\"\r\n            :header-cell-style=\"tableHeaderColor\"\r\n            v-loading=\"innerTableDataLoading\"\r\n            @expand-change=\"expandSelect\"\r\n            :row-key=\"getRowKeys\"\r\n            :expand-row-keys=\"expands\"\r\n          >\r\n            <el-table-column type=\"expand\">\r\n              <template slot-scope=\"props\">\r\n                <el-form\r\n                  ref=\"detailDataForm\"\r\n                  :model=\"detailDataForm\"\r\n                  label-position=\"right\"\r\n                  inline\r\n                  class=\"demo-table-expand\"\r\n                >\r\n                  <el-form-item label=\"商品名称\">\r\n                    <span>{{ props.row.productName }}</span>\r\n                  </el-form-item>\r\n                  <el-form-item label=\"优惠券名称\">\r\n                    <span>{{ detailDataForm.couponName }}</span>\r\n                  </el-form-item>\r\n                  <el-form-item label=\"优惠券金额\">\r\n                    <span>￥{{ detailDataForm.couponAmount }}</span>\r\n                  </el-form-item>\r\n                  <el-form-item label=\"开始时间\">\r\n                    <span>{{ detailDataForm.startDateFormat }}</span>\r\n                  </el-form-item>\r\n                  <el-form-item label=\"结束时间\">\r\n                    <span>{{ detailDataForm.endDateFormat }}</span>\r\n                  </el-form-item>\r\n                  <el-form-item label=\"券总数量\">\r\n                    <span>{{ detailDataForm.couponQuantity}}</span>\r\n                  </el-form-item>\r\n                  <el-form-item label=\"领取限制\">\r\n                    <span>{{ detailDataForm.perLimit}}</span>\r\n                  </el-form-item>\r\n                </el-form>\r\n              </template>\r\n            </el-table-column>\r\n            <el-table-column label=\"序号\" type=\"index\" width=\"50\" align=\"center\"></el-table-column>\r\n            <el-table-column\r\n              prop=\"productName\"\r\n              label=\"商品名称\"\r\n              align=\"center\"\r\n              :show-overflow-tooltip=\"true\"\r\n            ></el-table-column>\r\n            <el-table-column prop=\"couponType\" label=\"类型\" :formatter=\"typeFormat\" align=\"center\"></el-table-column>\r\n            <el-table-column\r\n              prop=\"couponStatus\"\r\n              label=\"状态\"\r\n              :formatter=\"statusFormat\"\r\n              align=\"center\"\r\n            ></el-table-column>\r\n            <el-table-column label=\"操作\" align=\"center\">\r\n              <template slot-scope=\"scope\">\r\n                <el-button\r\n                  type=\"primary\"\r\n                  icon=\"el-icon-edit\"\r\n                  circle\r\n                  @click=\"handleCouponEdit(scope.$index, scope.row)\"\r\n                ></el-button>\r\n                <el-button\r\n                  type=\"danger\"\r\n                  icon=\"el-icon-delete\"\r\n                  circle\r\n                  @click=\"handleCouponDelete(scope.$index, scope.row)\"\r\n                ></el-button>\r\n              </template>\r\n            </el-table-column>\r\n          </el-table>\r\n        </div>\r\n        <!-- 嵌套抽屉 -->\r\n        <el-drawer\r\n          size=\"50%\"\r\n          :append-to-body=\"true\"\r\n          :before-close=\"handleInnerDrawerClose\"\r\n          :visible.sync=\"innerDrawer\"\r\n          :show-close=\"false\"\r\n          :withHeader=\"false\"\r\n        >\r\n          <div style=\"text-align: center;\">\r\n            <span class=\"inner-drawer-tittle\">{{innerDrawerTittle}}</span>\r\n          </div>\r\n          <el-form\r\n            :rules=\"ruleValidate\"\r\n            ref=\"saveUserCouponForm\"\r\n            :model=\"saveUserCouponForm\"\r\n            :inline=\"true\"\r\n            :lable-position=\"labelPosition\"\r\n            label-width=\"120px\"\r\n          ></el-form>\r\n          <div class=\"demo-drawer__footer\" style=\"text-align:center;\">\r\n            <el-button type=\"primary\" @click=\"saveShopCoupon()\">确 定</el-button>\r\n            <el-button @click=\"innerDrawerClose()\">取 消</el-button>\r\n          </div>\r\n        </el-drawer>\r\n      </el-drawer>\r\n    </div>\r\n  </div>\r\n</template>\r\n<script>\r\nexport default {\r\n  name: \"funcModule\",\r\n  data() {\r\n    return {\r\n      dialogCentr: true,\r\n      labelPosition: \"left\",\r\n      query: {\r\n        pageNum: 1,\r\n        pageSize: 10\r\n      },\r\n      tableData: [],\r\n      pageTotal: 0,\r\n      statusList: [\r\n        { id: 0, name: \"可用\" },\r\n        { id: 1, name: \"不可用\" }\r\n      ],\r\n      typeList: [\r\n        { id: 1, name: \"普通客户(拆家)\" },\r\n        { id: 2, name: \"商家\" }\r\n      ],\r\n      dialogImageUrl: \"\",\r\n      imgDialogVisible: false,\r\n      fileLists: [],\r\n      dialogMessage: \"\",\r\n      saveForm: {},\r\n      addOrUpdate: 0,\r\n      editVisible: false,\r\n      ruleValidate: {},\r\n      tableDataLoading: true,\r\n      userLevelList: [],\r\n      selectUserId: \"\",\r\n      couponDrawer: false,\r\n      couponList: [],\r\n      innerTableDataLoading: true,\r\n      saveUserCouponForm: {},\r\n      innerDrawer: false,\r\n      innerDrawerTittle: \"\",\r\n      userCouponAddOrUpdate: 0,\r\n      detailDataForm: {},\r\n      expands: []\r\n    };\r\n  },\r\n  created() {\r\n    this.getTableData();\r\n    this.getUserLevelList();\r\n  },\r\n  methods: {\r\n    getRowKeys(row) {\r\n      return row.id;\r\n    },\r\n    //展开行\r\n    expandSelect(row, expandedRows) {\r\n      var that = this;\r\n      if (expandedRows.length) {\r\n        that.expands = [];\r\n        if (row) {\r\n          that.expands.push(row.id);\r\n          this.getCouponDetailData(row.couponId, row.couponType);\r\n        }\r\n      } else {\r\n        that.expands = [];\r\n        this.detailDataForm = {};\r\n      }\r\n    },\r\n    //展开行\r\n    userExpandSelect(row, expandedRows) {\r\n      var that = this;\r\n      if (expandedRows.length) {\r\n        that.expands = [];\r\n        if (row) {\r\n          that.expands.push(row.id);\r\n        }\r\n      } else {\r\n        that.expands = [];\r\n      }\r\n    },\r\n    //用户优惠券详情\r\n    getCouponDetailData(id, type) {\r\n      var url = \"/user/getUserCouponDetail\";\r\n      var params = { couponId: id, couponType: type };\r\n      this.postRequest(url, params).then(resp => {\r\n        if (resp && resp.status == 200 && resp.data.status == \"200\") {\r\n          this.detailDataForm = resp.data.obj;\r\n        } else {\r\n          this.$message(resp.data.msg);\r\n        }\r\n      });\r\n    },\r\n    //关闭抽屉\r\n    handleDrawerClose(done) {\r\n      this.couponList = [];\r\n      this.innerTableDataLoading = true;\r\n      done();\r\n    },\r\n    /* eslint-disable no-unused-vars */\r\n    handleInnerDrawerClose(done) {\r\n      this.$confirm(\"确定关闭吗？\")\r\n        .then(_ => {\r\n          this.resetForm(\"saveUserCouponForm\");\r\n          this.saveUserCouponForm = {};\r\n          done();\r\n        })\r\n        .catch(_ => {});\r\n    },\r\n    //保存角色\r\n    saveUser() {\r\n      this.$refs.saveForm.validate(valid => {\r\n        if (valid) {\r\n          var url = \"\";\r\n          if (this.addOrUpdate == 0) {\r\n            url = \"/user/insertUser\";\r\n          } else if (this.addOrUpdate == 1) {\r\n            url = \"/user/updateUser\";\r\n          }\r\n          this.saveForm.userImg = this.fileLists[0].url;\r\n          var params = this.saveForm;\r\n          this.postRequest(url, params).then(resp => {\r\n            if (resp && resp.status == 200 && resp.data.status == \"200\") {\r\n              this.$message.success(\"保存成功\");\r\n              this.editVisible = false;\r\n              this.getTableData();\r\n            } else {\r\n              this.$message(\"保存失败\");\r\n            }\r\n          });\r\n        }\r\n      });\r\n    },\r\n    //添加弹出\r\n    handleAdd() {\r\n      this.dialogMessage = \"添加用户\";\r\n      this.addOrUpdate = 0;\r\n      this.editVisible = true;\r\n    },\r\n    //关闭弹窗\r\n    closeDialog() {\r\n      this.resetForm(\"saveForm\");\r\n      this.saveForm = {};\r\n      this.fileLists = [];\r\n    },\r\n    resetForm(formName) {\r\n      this.$refs[formName].clearValidate();\r\n    },\r\n    getTableData() {\r\n      var url = \"/user/listUser\";\r\n      this.postRequest(url, this.query).then(resp => {\r\n        if (resp && resp.status == 200 && resp.data.status == \"200\") {\r\n          this.tableData = resp.data.obj.list;\r\n          this.pageTotal = resp.data.obj.total;\r\n          this.tableDataLoading = false;\r\n        }\r\n      });\r\n    },\r\n    getUserLevelList() {\r\n      var url = \"/user/listUserLevel\";\r\n      this.postRequest(url, this.query).then(resp => {\r\n        if (resp && resp.status == 200 && resp.data.status == \"200\") {\r\n          this.userLevelList = resp.data.obj;\r\n        }\r\n      });\r\n    },\r\n    //商户优惠券列表数据\r\n    getCouponTableData(id) {\r\n      var url = \"/user/listUserCoupon\";\r\n      var params = { userId: id };\r\n      this.postRequest(url, params).then(resp => {\r\n        if (resp && resp.status == 200 && resp.data.status == \"200\") {\r\n          this.couponList = resp.data.obj;\r\n          this.innerTableDataLoading = false;\r\n        }\r\n      });\r\n    },\r\n    //查看用户优惠券列表\r\n    // eslint-disable-next-line no-unused-vars\r\n    handleMore(index, row) {\r\n      this.selectUserId = row.id;\r\n      this.couponDrawer = true;\r\n      this.innerTableDataLoading = true;\r\n      this.getCouponTableData(row.id);\r\n    },\r\n    //编辑弹出\r\n    handleEdit(index, row) {\r\n      this.dialogMessage = \"编辑用户\";\r\n      this.addOrUpdate = 1;\r\n      this.idx = index;\r\n      this.saveForm = JSON.parse(JSON.stringify(row));\r\n      this.fileLists = [\r\n        {\r\n          name: \"\",\r\n          url: row.userImg\r\n        }\r\n      ];\r\n      this.editVisible = true;\r\n    },\r\n    // eslint-disable-next-line no-unused-vars\r\n    tableHeaderColor(row, rowIndex) {\r\n      return \"background-color:#EBEEF5;\";\r\n    },\r\n    handlePageChange(val) {\r\n      this.tableDataLoading = true;\r\n      this.$set(this.query, \"pageNum\", val);\r\n      this.getTableData(this.query);\r\n    },\r\n    handleSizeChange(val) {\r\n      this.tableDataLoading = true;\r\n      this.$set(this.query, \"pageNum\", 1);\r\n      this.$set(this.query, \"pageSize\", val);\r\n      this.getTableData(this.query);\r\n    },\r\n    //搜索功能\r\n    handleSearch() {\r\n      this.tableDataLoading = true;\r\n      this.getTableData();\r\n    },\r\n    resetQuery() {\r\n      this.query.nickName = null;\r\n      this.query.userStatus = null;\r\n      this.query.userType = null;\r\n      this.tableDataLoading = true;\r\n      this.getTableData();\r\n    },\r\n    // eslint-disable-next-line no-unused-vars\r\n    statusFormat(row, column) {\r\n      if (row.couponStatus == 0) {\r\n        return \"未使用\";\r\n      } else if (row.couponStatus == 1) {\r\n        return \"已使用\";\r\n      } else if (row.couponStatus == 2) {\r\n        return \"过期\";\r\n      }\r\n    },\r\n    userStatusFormat(row, column) {\r\n      if (row.userStatus == 0) {\r\n        return \"可用\";\r\n      } else if (row.userStatus == 1) {\r\n        return \"不可用\";\r\n      }\r\n    },\r\n    userStatusFormatRe(userStatus) {\r\n      if (userStatus == 0) {\r\n        return \"可用\";\r\n      } else if (userStatus == 1) {\r\n        return \"不可用\";\r\n      }\r\n    },\r\n    // eslint-disable-next-line no-unused-vars\r\n    typeFormat(row, column) {\r\n      if (row.couponType == 0) {\r\n        return \"任务金\";\r\n      } else if (row.couponType == 1) {\r\n        return \"商铺券\";\r\n      }\r\n    },\r\n    userTypeFormat(row, column) {\r\n      if (row.userType == 1) {\r\n        return \"普通客户(拆家)\";\r\n      } else if (row.userType == 2) {\r\n        return \"商家\";\r\n      }\r\n    },\r\n    // eslint-disable-next-line no-unused-vars\r\n    createDateFormat(row, column) {\r\n      return this.dateFormat(row.createTime);\r\n    },\r\n    // eslint-disable-next-line no-unused-vars\r\n    dateFormat(date) {\r\n      if (date === null) {\r\n        return null;\r\n      }\r\n      let d = new Date(date); //val 为表格内取到的后台时间\r\n      let month =\r\n        d.getMonth() + 1 < 10 ? \"0\" + (d.getMonth() + 1) : d.getMonth() + 1;\r\n      let day = d.getDate() < 10 ? \"0\" + d.getDate() : d.getDate();\r\n      let hours = d.getHours() < 10 ? \"0\" + d.getHours() : d.getHours();\r\n      let min = d.getMinutes() < 10 ? \"0\" + d.getMinutes() : d.getMinutes();\r\n      let sec = d.getSeconds() < 10 ? \"0\" + d.getSeconds() : d.getSeconds();\r\n      let times =\r\n        d.getFullYear() +\r\n        \"-\" +\r\n        month +\r\n        \"-\" +\r\n        day +\r\n        \" \" +\r\n        hours +\r\n        \":\" +\r\n        min +\r\n        \":\" +\r\n        sec;\r\n      return times;\r\n    },\r\n    //删除图片\r\n    // eslint-disable-next-line no-unused-vars\r\n    handleRemove(file, fileList) {\r\n      this.fileLists = [];\r\n    },\r\n    //查看大图\r\n    handlePictureCardPreview(file) {\r\n      this.dialogImageUrl = file.url;\r\n      this.imgDialogVisible = true;\r\n    },\r\n    //图片上传成功\r\n    // eslint-disable-next-line no-unused-vars\r\n    success(response, file, fileList) {\r\n      this.fileLists = [\r\n        {\r\n          name: file.name,\r\n          url: response.url\r\n        }\r\n      ];\r\n    },\r\n    // eslint-disable-next-line no-unused-vars\r\n    handleExceed(files, fileList) {\r\n      this.$message.warning(`请最多上传一个图片。`);\r\n    }\r\n  }\r\n};\r\n</script>\r\n<style scoped>\r\n.table-module-img {\r\n  display: block;\r\n  margin: auto;\r\n  width: 50px;\r\n  height: 50px;\r\n}\r\n.handle-box {\r\n  margin-bottom: 10px;\r\n  text-align: left;\r\n}\r\n.name-input {\r\n  width: 200px;\r\n  margin-right: 10px;\r\n}\r\n.status-select {\r\n  margin-right: 10px;\r\n}\r\n.demo-table-expand label {\r\n  width: 90px;\r\n  color: #99a9bf;\r\n}\r\n.demo-table-expand .el-form-item {\r\n  margin-right: 0;\r\n  margin-bottom: 0;\r\n  width: 70%;\r\n}\r\n</style>"],"sourceRoot":"src/pages/user"}]}