(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-32ed8426"],{"15a4":function(e,t,a){"use strict";var r=a("f022"),l=a.n(r);l.a},1611:function(e,t,a){},"20c8":function(e,t,a){},"289a":function(e,t,a){"use strict";a.r(t);var r=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticStyle:{"margin-top":"10px"}},[a("div",{staticClass:"container"},[a("div",{staticClass:"handle-box"},[a("el-input",{staticClass:"name-input",attrs:{placeholder:"请输入banner名称"},model:{value:e.query.bannerName,callback:function(t){e.$set(e.query,"bannerName",t)},expression:"query.bannerName"}}),a("el-select",{staticClass:"status-select",attrs:{placeholder:"请选择banner类别"},model:{value:e.query.bannerType,callback:function(t){e.$set(e.query,"bannerType",t)},expression:"query.bannerType"}},e._l(e.bannerTypeList,function(e){return a("el-option",{key:e.id,attrs:{label:e.typeName,value:e.id}})}),1),a("el-select",{staticClass:"status-select",attrs:{placeholder:"请选择banner状态"},model:{value:e.query.bannerStatus,callback:function(t){e.$set(e.query,"bannerStatus",t)},expression:"query.bannerStatus"}},e._l(e.bannerStatusList,function(e){return a("el-option",{key:e.id,attrs:{label:e.name,value:e.id}})}),1),a("el-button",{attrs:{type:"primary",round:"",icon:"el-icon-search"},on:{click:function(t){return e.handleSearch()}}},[e._v("搜索")]),a("el-button",{attrs:{type:"danger",round:"",icon:"el-icon-refresh"},on:{click:function(t){return e.resetQuery()}}},[e._v("重置")]),a("el-button",{attrs:{type:"primary",round:"",icon:"el-icon-circle-plus-outline"},on:{click:function(t){return e.handleAdd()}}},[e._v("添加")])],1),a("el-table",{directives:[{name:"loading",rawName:"v-loading",value:e.tableDataLoading,expression:"tableDataLoading"}],ref:"multipleTable",staticClass:"table",attrs:{data:e.tableData,"header-cell-style":e.tableHeaderColor,"header-cell-class-name":"table-header"}},[a("el-table-column",{attrs:{label:"序号",type:"index",width:"50",align:"center"}}),a("el-table-column",{attrs:{label:"图片",width:"200px",align:"center"},scopedSlots:e._u([{key:"default",fn:function(e){return[a("el-image",{staticClass:"table-banner-img",attrs:{src:e.row.bannerUrl,"preview-src-list":[e.row.bannerUrl]}})]}}])}),a("el-table-column",{attrs:{prop:"bannerName",label:"banner名称",align:"center","show-overflow-tooltip":!0}}),a("el-table-column",{attrs:{prop:"jumpUrl",label:"跳转地址",align:"center","show-overflow-tooltip":!0}}),a("el-table-column",{attrs:{prop:"bannerType",label:"类型",formatter:e.typeFormat,align:"center","show-overflow-tooltip":!0}}),a("el-table-column",{attrs:{prop:"bannerStatus",label:"状态",formatter:e.statusFormat,align:"center","show-overflow-tooltip":!0}}),a("el-table-column",{attrs:{prop:"sorder",label:"排序",align:"center","show-overflow-tooltip":!0}}),a("el-table-column",{attrs:{prop:"createTime",label:"创建时间",formatter:e.dateFormat,align:"center"}}),a("el-table-column",{attrs:{label:"操作",align:"center"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("el-button",{attrs:{type:"primary",icon:"el-icon-edit",circle:""},on:{click:function(a){return e.handleEdit(t.$index,t.row)}}}),a("el-button",{attrs:{type:"danger",icon:"el-icon-delete",circle:""},on:{click:function(a){return e.handleDelete(t.$index,t.row)}}})]}}])})],1),a("div",{staticClass:"pagination"},[a("el-pagination",{attrs:{background:"",layout:"total, prev, pager, next","current-page":e.query.pageNum,"page-size":e.query.pageSize,total:e.pageTotal},on:{"current-change":e.handlePageChange}}),a("el-dialog",{attrs:{title:e.dialogMessage,visible:e.editVisible,center:e.dialogCentr},on:{"update:visible":function(t){e.editVisible=t},close:e.closeDialog}},[a("el-form",{ref:"saveForm",attrs:{rules:e.ruleValidate,model:e.saveForm,inline:!0,"lable-position":e.labelPosition,"label-width":"120px"}},[a("el-form-item",{attrs:{label:"banner名称",prop:"bannerName"}},[a("el-input",{attrs:{placeholder:"请输入banner名称","suffix-icon":"“xxxx”"},model:{value:e.saveForm.bannerName,callback:function(t){e.$set(e.saveForm,"bannerName",t)},expression:"saveForm.bannerName"}})],1),a("el-form-item",{attrs:{label:"跳转地址",prop:"jumpUrl"}},[a("el-input",{attrs:{placeholder:"请输入跳转地址","suffix-icon":"“xxxx”"},model:{value:e.saveForm.jumpUrl,callback:function(t){e.$set(e.saveForm,"jumpUrl",t)},expression:"saveForm.jumpUrl"}})],1),a("el-form-item",{attrs:{label:"banner排序",prop:"sorder"}},[a("el-input",{attrs:{placeholder:"请输入排序","suffix-icon":"“xxxx”"},model:{value:e.saveForm.sorder,callback:function(t){e.$set(e.saveForm,"sorder",t)},expression:"saveForm.sorder"}})],1),a("el-form-item",{attrs:{label:"banner状态",prop:"bannerStatus"}},[a("el-select",{attrs:{placeholder:"请选择状态"},model:{value:e.saveForm.bannerStatus,callback:function(t){e.$set(e.saveForm,"bannerStatus",t)},expression:"saveForm.bannerStatus"}},e._l(e.bannerStatusList,function(e){return a("el-option",{key:e.id,attrs:{label:e.name,value:e.id}})}),1)],1),a("el-form-item",{attrs:{label:"banner类型",prop:"bannerType"}},[a("el-select",{staticStyle:{width:"100%"},attrs:{placeholder:"请选择banner类型"},model:{value:e.saveForm.bannerType,callback:function(t){e.$set(e.saveForm,"bannerType",t)},expression:"saveForm.bannerType"}},e._l(e.bannerTypeList,function(e){return a("el-option",{key:e.id,attrs:{label:e.typeName,value:e.id}})}),1)],1),a("el-form-item",{staticStyle:{width:"100%"},attrs:{label:"图片上传",prop:"bannerUrl"}},[a("el-upload",{attrs:{name:"file",limit:1,action:"/admin/upload/file","list-type":"picture-card","file-list":e.fileLists,"on-preview":e.handlePictureCardPreview,"on-success":e.success,"on-remove":e.handleRemove,"on-exceed":e.handleExceed}},[a("i",{staticClass:"el-icon-plus"})]),a("el-dialog",{attrs:{visible:e.imgDialogVisible,size:"full",modal:!1,title:"查看大图片"},on:{"update:visible":function(t){e.imgDialogVisible=t}}},[a("img",{attrs:{width:"60%",src:e.dialogImageUrl,alt:""}})])],1)],1),a("div",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[a("el-button",{attrs:{type:"primary"},on:{click:function(t){return e.saveBanner()}}},[e._v("确定")]),a("el-button",{on:{click:function(t){e.editVisible=!1}}},[e._v("取消")])],1)],1)],1)],1)])},l=[],i=(a("7f7f"),{name:"banner",data:function(){return{dialogCentr:!0,labelPosition:"left",query:{pageNum:1,pageSize:10},tableData:[],pageTotal:0,bannerTypeList:[{id:0,typeName:"App引导页"},{id:1,typeName:"首页轮播图"}],bannerStatusList:[{id:0,name:"创建"},{id:1,name:"发布"},{id:2,name:"下架"}],dialogImageUrl:"",imgDialogVisible:!1,fileLists:[],dialogMessage:"",saveForm:{},addOrUpdate:0,editVisible:!1,ruleValidate:{bannerName:[{required:!0,message:"请输入banner名称",trigger:"blur"}],bannerType:[{required:!0,message:"请选择banner类型",trigger:"change"}],jumpUrl:[{required:!0,message:"请输入跳转地址",trigger:"blur"}],bannerStatus:[{required:!0,message:"请选择banner状态",trigger:"change"}],sorder:[{required:!0,message:"请输入banner排序",trigger:"blur"}]},tableDataLoading:!0}},created:function(){this.getTableData()},methods:{handleDelete:function(e,t){var a=this;this.$confirm("确定要删除吗？","提示",{type:"warning"}).then(function(){var e="/banner/deleteBanner",r={id:t.id};a.postRequest(e,r).then(function(e){e&&200==e.status&&"200"==e.data.status?(a.$message.success("删除成功"),a.getTableData()):a.$message("删除失败")})}).catch(function(){})},saveBanner:function(){var e=this;this.$refs.saveForm.validate(function(t){if(t){var a="";0==e.addOrUpdate?a="/banner/insertBanner":1==e.addOrUpdate&&(a="/banner/updateBanner"),e.saveForm.bannerUrl=e.fileLists[0].url;var r=e.saveForm;e.postRequest(a,r).then(function(t){t&&200==t.status&&"200"==t.data.status?(e.$message.success("保存成功"),e.editVisible=!1,e.getTableData()):e.$message("保存失败")})}})},handleAdd:function(){this.dialogMessage="添加banner",this.addOrUpdate=0,this.editVisible=!0},closeDialog:function(){this.resetForm("saveForm"),this.saveForm={},this.fileLists=[]},resetForm:function(e){this.$refs[e].clearValidate()},getTableData:function(){var e=this,t="banner/listBanner";this.postRequest(t,this.query).then(function(t){t&&200==t.status&&"200"==t.data.status&&(e.tableData=t.data.obj.list,e.pageTotal=t.data.obj.total,e.tableDataLoading=!1)})},handleEdit:function(e,t){this.dialogMessage="编辑banner",this.addOrUpdate=1,this.idx=e,this.saveForm=JSON.parse(JSON.stringify(t)),this.fileLists=[{name:"",url:t.bannerUrl}],this.editVisible=!0},tableHeaderColor:function(e,t){return"background-color:#EBEEF5;"},handlePageChange:function(e){this.tableDataLoading=!0,this.$set(this.query,"pageNum",e),this.getTableData(this.query)},handleSearch:function(){this.getTableData()},resetQuery:function(){this.query.bannerName=null,this.query.bannerType=null,this.query.bannerStatus=null,this.getTableData()},typeFormat:function(e,t){return 0==e.bannerType?"App引导页":1==e.bannerType?"首页轮播图":void 0},statusFormat:function(e,t){return 0==e.bannerStatus?"创建":1==e.bannerStatus?"发布":2==e.bannerStatus?"下架":void 0},dateFormat:function(e,t){if(null===e.createTime)return null;var a=new Date(e.createTime),r=a.getMonth()+1<10?"0"+(a.getMonth()+1):a.getMonth()+1,l=a.getDate()<10?"0"+a.getDate():a.getDate(),i=a.getHours()<10?"0"+a.getHours():a.getHours(),n=a.getMinutes()<10?"0"+a.getMinutes():a.getMinutes(),s=a.getSeconds()<10?"0"+a.getSeconds():a.getSeconds(),o=a.getFullYear()+"-"+r+"-"+l+" "+i+":"+n+":"+s;return o},handleRemove:function(e,t){this.fileLists=[]},handlePictureCardPreview:function(e){this.dialogImageUrl=e.url,this.imgDialogVisible=!0},success:function(e,t,a){this.fileLists=[{name:t.name,url:e.url}]},handleExceed:function(e,t){this.$message.warning("请最多上传一个图片。")}}}),n=i,s=(a("15a4"),a("2877")),o=Object(s["a"])(n,r,l,!1,null,"49176e00",null);t["default"]=o.exports},"3efd":function(e,t,a){"use strict";a.r(t);var r=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticStyle:{"margin-top":"10px"}},[a("div",{staticClass:"container"},[a("div",{staticClass:"handle-box"},[a("el-input",{staticClass:"name-input",attrs:{placeholder:"请输入活动名称"},model:{value:e.query.actName,callback:function(t){e.$set(e.query,"actName",t)},expression:"query.actName"}}),a("el-select",{staticClass:"status-select",attrs:{placeholder:"请选择活动状态"},model:{value:e.query.actStatus,callback:function(t){e.$set(e.query,"actStatus",t)},expression:"query.actStatus"}},e._l(e.actStatusList,function(e){return a("el-option",{key:e.id,attrs:{label:e.name,value:e.id}})}),1),a("el-select",{staticClass:"status-select",attrs:{placeholder:"请选择倒计时标记"},model:{value:e.query.flag,callback:function(t){e.$set(e.query,"flag",t)},expression:"query.flag"}},e._l(e.flagList,function(e){return a("el-option",{key:e.id,attrs:{label:e.name,value:e.id}})}),1),a("el-button",{attrs:{type:"primary",round:"",icon:"el-icon-search"},on:{click:function(t){return e.handleSearch()}}},[e._v("搜索")]),a("el-button",{attrs:{type:"danger",round:"",icon:"el-icon-refresh"},on:{click:function(t){return e.resetQuery()}}},[e._v("重置")]),a("el-button",{attrs:{type:"primary",round:"",icon:"el-icon-circle-plus-outline"},on:{click:function(t){return e.handleAdd()}}},[e._v("添加")])],1),a("el-table",{directives:[{name:"loading",rawName:"v-loading",value:e.tableDataLoading,expression:"tableDataLoading"}],ref:"multipleTable",staticClass:"table",attrs:{data:e.tableData,"header-cell-style":e.tableHeaderColor,"header-cell-class-name":"table-header"}},[a("el-table-column",{attrs:{label:"序号",type:"index",width:"50",align:"center"}}),a("el-table-column",{attrs:{label:"图片",width:"80px",align:"center"},scopedSlots:e._u([{key:"default",fn:function(e){return[a("el-image",{staticClass:"table-module-img",attrs:{src:e.row.pictureUrl,"preview-src-list":[e.row.pictureUrl]}})]}}])}),a("el-table-column",{attrs:{prop:"actName",label:"活动名称",align:"center","show-overflow-tooltip":!0}}),a("el-table-column",{attrs:{prop:"actType",label:"活动类型",align:"center","show-overflow-tooltip":!0}}),a("el-table-column",{attrs:{prop:"actStatus",label:"状态",formatter:e.statusFormat,align:"center","show-overflow-tooltip":!0}}),a("el-table-column",{attrs:{prop:"sOrder",label:"排序",align:"center","show-overflow-tooltip":!0}}),a("el-table-column",{attrs:{prop:"flag",label:"是否需要倒计时",formatter:e.flagFormat,align:"center","show-overflow-tooltip":!0}}),a("el-table-column",{attrs:{prop:"createTime",label:"创建时间",formatter:e.dateFormat,align:"center"}}),a("el-table-column",{attrs:{label:"操作",align:"center"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("el-button",{attrs:{type:"primary",icon:"el-icon-more-outline",circle:""},on:{click:function(a){return e.handleMore(t.$index,t.row)}}}),a("el-button",{attrs:{type:"primary",icon:"el-icon-edit",circle:""},on:{click:function(a){return e.handleEdit(t.$index,t.row)}}}),a("el-button",{attrs:{type:"danger",icon:"el-icon-delete",circle:""},on:{click:function(a){return e.handleDelete(t.$index,t.row)}}})]}}])})],1),a("div",{staticClass:"pagination"},[a("el-pagination",{attrs:{background:"",layout:"total, prev, pager, next","current-page":e.query.pageNum,"page-size":e.query.pageSize,total:e.pageTotal},on:{"current-change":e.handlePageChange}})],1),a("el-dialog",{attrs:{title:e.dialogMessage,visible:e.editVisible,center:e.dialogCentr},on:{"update:visible":function(t){e.editVisible=t},close:e.closeDialog}},[a("el-form",{ref:"saveForm",attrs:{rules:e.ruleValidate,model:e.saveForm,inline:!0,"lable-position":e.labelPosition,"label-width":"120px"}},[a("el-form-item",{attrs:{label:"活动名称",prop:"actName"}},[a("el-input",{attrs:{placeholder:"请输入活动名称","suffix-icon":"“xxxx”"},model:{value:e.saveForm.actName,callback:function(t){e.$set(e.saveForm,"actName",t)},expression:"saveForm.actName"}})],1),a("el-form-item",{attrs:{label:"活动类型",prop:"actType"}},[a("el-input",{attrs:{placeholder:"请输入活动类型","suffix-icon":"“xxxx”"},model:{value:e.saveForm.actType,callback:function(t){e.$set(e.saveForm,"actType",t)},expression:"saveForm.actType"}})],1),a("el-form-item",{attrs:{label:"活动排序",prop:"sOrder"}},[a("el-input",{attrs:{placeholder:"请输入排序","suffix-icon":"“xxxx”"},model:{value:e.saveForm.sOrder,callback:function(t){e.$set(e.saveForm,"sOrder",t)},expression:"saveForm.sOrder"}})],1),a("el-form-item",{attrs:{label:"活动状态",prop:"actStatus"}},[a("el-select",{attrs:{placeholder:"请选择状态"},model:{value:e.saveForm.actStatus,callback:function(t){e.$set(e.saveForm,"actStatus",t)},expression:"saveForm.actStatus"}},e._l(e.actStatusList,function(e){return a("el-option",{key:e.id,attrs:{label:e.name,value:e.id}})}),1)],1),a("el-form-item",{attrs:{label:"活动倒计时标记",prop:"flag"}},[a("el-select",{attrs:{placeholder:"请选择状态"},model:{value:e.saveForm.flag,callback:function(t){e.$set(e.saveForm,"flag",t)},expression:"saveForm.flag"}},e._l(e.flagList,function(e){return a("el-option",{key:e.id,attrs:{label:e.name,value:e.id}})}),1)],1),a("el-form-item",{staticStyle:{width:"100%"},attrs:{label:"图片上传",prop:"pictureUrl"}},[a("el-upload",{attrs:{name:"file",limit:1,action:"/admin/upload/file","list-type":"picture-card","file-list":e.fileLists,"on-preview":e.handlePictureCardPreview,"on-success":e.success,"on-remove":e.handleRemove,"on-exceed":e.handleExceed}},[a("i",{staticClass:"el-icon-plus"})]),a("el-dialog",{attrs:{visible:e.imgDialogVisible,size:"full",modal:!1,title:"查看大图片"},on:{"update:visible":function(t){e.imgDialogVisible=t}}},[a("img",{attrs:{width:"60%",src:e.dialogImageUrl,alt:""}})])],1)],1),a("div",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[a("el-button",{attrs:{type:"primary"},on:{click:function(t){return e.saveActivity()}}},[e._v("确定")]),a("el-button",{on:{click:function(t){e.editVisible=!1}}},[e._v("取消")])],1)],1),a("el-drawer",{attrs:{visible:e.activityProductDrawer,direction:"rtl",size:"80%","destroy-on-close":!0,withHeader:!1,"before-close":e.handleDrawerClose},on:{"update:visible":function(t){e.activityProductDrawer=t}}},[a("div",{staticStyle:{"margin-left":"10px","margin-top":"10px"}},[a("div",{staticClass:"handle-box"},[a("el-input",{staticClass:"name-input",attrs:{placeholder:"请输入商品名称"},model:{value:e.productQuery.productName,callback:function(t){e.$set(e.productQuery,"productName",t)},expression:"productQuery.productName"}}),a("el-button",{attrs:{type:"primary",round:"",icon:"el-icon-search"},on:{click:function(t){return e.handleProductSearch()}}},[e._v("搜索")]),a("el-button",{attrs:{type:"danger",round:"",icon:"el-icon-refresh"},on:{click:function(t){return e.resetProductQuery()}}},[e._v("重置")]),a("el-button",{attrs:{type:"primary",round:"",icon:"el-icon-circle-plus-outline"},on:{click:function(t){return e.handleProductAdd()}}},[e._v("添加")])],1),a("el-table",{directives:[{name:"loading",rawName:"v-loading",value:e.innerTableDataLoading,expression:"innerTableDataLoading"}],attrs:{data:e.activityProductList,"header-cell-style":e.tableHeaderColor}},[a("el-table-column",{attrs:{label:"序号",type:"index",width:"50",align:"center"}}),a("el-table-column",{attrs:{label:"图片",align:"center",width:"80px"},scopedSlots:e._u([{key:"default",fn:function(e){return[a("el-image",{staticClass:"table-module-img",attrs:{src:e.row.productImg,"preview-src-list":[e.row.productImg]}})]}}])}),a("el-table-column",{attrs:{prop:"productName",label:"商品名称",align:"center","show-overflow-tooltip":!0,width:"110px"}}),a("el-table-column",{attrs:{label:"任务金促销价",align:"center",width:"110px"},scopedSlots:e._u([{key:"default",fn:function(t){return[e._v("￥"+e._s(t.row.price))]}}])}),a("el-table-column",{attrs:{label:"商品划线价格",align:"center",width:"110px"},scopedSlots:e._u([{key:"default",fn:function(t){return[e._v("￥"+e._s(t.row.scribingPrice))]}}])}),a("el-table-column",{attrs:{prop:"sorder",label:"排序",align:"center",width:"50px"}}),a("el-table-column",{attrs:{prop:"startDate",label:"开始时间",formatter:e.startDateFormat,align:"center"}}),a("el-table-column",{attrs:{prop:"endDate",label:"结束时间",formatter:e.endDateFormat,align:"center"}}),a("el-table-column",{attrs:{prop:"createTime",label:"创建时间",formatter:e.dateFormat,align:"center"}}),a("el-table-column",{attrs:{label:"操作",align:"center"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("el-button",{attrs:{type:"primary",icon:"el-icon-edit",circle:""},on:{click:function(a){return e.handleProductEdit(t.$index,t.row)}}}),a("el-button",{attrs:{type:"danger",icon:"el-icon-delete",circle:""},on:{click:function(a){return e.handleProductDelete(t.$index,t.row)}}})]}}])})],1),a("div",{staticClass:"pagination"},[a("el-pagination",{attrs:{background:"",layout:"total, prev, pager, next","current-page":e.productQuery.pageNum,"page-size":e.productQuery.pageSize,total:e.productPageTotal},on:{"current-change":e.handlePageChangeProduct}})],1)],1),a("el-drawer",{attrs:{size:"50%","append-to-body":!0,"before-close":e.handleInnerDrawerClose,visible:e.innerDrawer,"show-close":!1,withHeader:!1},on:{"update:visible":function(t){e.innerDrawer=t}}},[a("div",{staticStyle:{"text-align":"center"}},[a("span",{staticClass:"inner-drawer-tittle"},[e._v(e._s(e.innerDrawerTittle))])]),a("el-form",{ref:"saveProductForm",attrs:{rules:e.ruleValidate,model:e.saveProductForm,inline:!0,"lable-position":e.labelPosition,"label-width":"120px"}},[a("el-form-item",{attrs:{label:"商品选择",prop:"productId"}},[a("el-select",{attrs:{disabled:e.productDisabled,filterable:"",placeholder:"请选择商品"},model:{value:e.saveProductForm.productId,callback:function(t){e.$set(e.saveProductForm,"productId",t)},expression:"saveProductForm.productId"}},e._l(e.productList,function(e){return a("el-option",{key:e.id,attrs:{label:e.productName,value:e.id}})}),1)],1),a("el-form-item",{attrs:{label:"任务金促销价",prop:"price"}},[a("el-input",{attrs:{placeholder:"请输入任务金促销价","suffix-icon":"“xxxx”"},model:{value:e.saveProductForm.price,callback:function(t){e.$set(e.saveProductForm,"price",t)},expression:"saveProductForm.price"}})],1),a("el-form-item",{attrs:{label:"商品划线价格",prop:"price"}},[a("el-input",{attrs:{placeholder:"请输入商品划线价格","suffix-icon":"“xxxx”"},model:{value:e.saveProductForm.scribingPrice,callback:function(t){e.$set(e.saveProductForm,"scribingPrice",t)},expression:"saveProductForm.scribingPrice"}})],1),a("el-form-item",{attrs:{label:"活动排序",prop:"sOrder"}},[a("el-input",{attrs:{placeholder:"请输入排序","suffix-icon":"“xxxx”"},model:{value:e.saveProductForm.sorder,callback:function(t){e.$set(e.saveProductForm,"sorder",t)},expression:"saveProductForm.sorder"}})],1),a("el-form-item",{attrs:{label:"开始时间",prop:"startDate"}},[a("el-date-picker",{attrs:{type:"datetime",placeholder:"选择开始时间"},model:{value:e.saveProductForm.startDate,callback:function(t){e.$set(e.saveProductForm,"startDate",t)},expression:"saveProductForm.startDate"}})],1),a("el-form-item",{attrs:{label:"结束时间",prop:"endDate"}},[a("el-date-picker",{attrs:{type:"datetime",placeholder:"选择结束时间"},model:{value:e.saveProductForm.endDate,callback:function(t){e.$set(e.saveProductForm,"endDate",t)},expression:"saveProductForm.endDate"}})],1)],1),a("div",{staticClass:"demo-drawer__footer",staticStyle:{"text-align":"center"}},[a("el-button",{attrs:{type:"primary"},on:{click:function(t){return e.saveActivityProduct()}}},[e._v("确 定")]),a("el-button",{on:{click:function(t){return e.innerDrawerClose()}}},[e._v("取 消")])],1)],1)],1)],1)])},l=[],i=(a("7f7f"),{name:"activity",data:function(){return{productDisabled:!1,innerDrawerTittle:"",innerDrawer:!1,selectActivityId:"",activityProductDrawer:!1,dialogCentr:!0,labelPosition:"left",query:{pageNum:1,pageSize:10},productQuery:{pageNum:1,pageSize:5},tableData:[],pageTotal:0,productPageTotal:0,actStatusList:[{id:0,name:"创建"},{id:1,name:"发布"},{id:2,name:"下架"}],flagList:[{id:0,name:"需要"},{id:1,name:"不需要"}],dialogImageUrl:"",imgDialogVisible:!1,fileLists:[],dialogMessage:"",saveForm:{},saveProductForm:{},addOrUpdate:0,productAddOrUpdate:0,editVisible:!1,ruleValidate:{actName:[{required:!0,message:"请输入活动名称",trigger:"blur"}],actType:[{required:!0,message:"请输入活动类型",trigger:"blur"}],actStatus:[{required:!0,message:"请选择活动状态",trigger:"change"}],sOrder:[{required:!0,message:"请输入活动排序",trigger:"blur"}],flag:[{required:!0,message:"请选择活动倒计时标记",trigger:"change"}]},activityProductList:[],productList:[],tableDataLoading:!0,innerTableDataLoading:!0}},created:function(){this.getTableData(),this.getProductList()},methods:{handleInnerDrawerClose:function(e){var t=this;this.$confirm("确定关闭吗？").then(function(a){t.resetForm("saveProductForm"),t.saveProductForm={},e()}).catch(function(e){})},handleDrawerClose:function(e){this.activityProductList=[],e()},innerDrawerClose:function(){this.innerDrawer=!1,this.resetForm("saveProductForm"),this.saveProductForm={}},handleDelete:function(e,t){var a=this;this.$confirm("确定要删除吗？","提示",{type:"warning"}).then(function(){var e="/activity/deleteActivity",r={id:t.id};a.postRequest(e,r).then(function(e){e&&200==e.status&&"200"==e.data.status?(a.$message.success("删除成功"),a.getTableData()):a.$message("删除失败")})}).catch(function(){})},handleProductDelete:function(e,t){var a=this;this.$confirm("确定要删除吗？","提示",{type:"warning"}).then(function(){var e="/activity/deleteActivityProduct",r={id:t.id};a.postRequest(e,r).then(function(e){e&&200==e.status&&"200"==e.data.status?(a.$message.success("删除成功"),a.getActivityProductTableData(a.selectActivityId)):a.$message("删除失败")})}).catch(function(){})},saveActivity:function(){var e=this;this.$refs.saveForm.validate(function(t){if(t){var a="";0==e.addOrUpdate?a="/activity/insertActivity":1==e.addOrUpdate&&(a="/activity/updateActivity"),e.saveForm.pictureUrl=e.fileLists[0].url;var r=e.saveForm;e.postRequest(a,r).then(function(t){t&&200==t.status&&"200"==t.data.status?(e.$message.success("保存成功"),e.editVisible=!1,e.getTableData()):e.$message("保存失败")})}})},saveActivityProduct:function(){var e=this,t="";0==this.productAddOrUpdate?(t="/activity/insertActivityProduct",this.saveProductForm.actId=this.selectActivityId):1==this.productAddOrUpdate&&(t="/activity/updateActivityProduct");var a=this.saveProductForm;this.postRequest(t,a).then(function(t){t&&200==t.status&&"200"==t.data.status?(e.$message.success("保存成功"),e.resetForm("saveProductForm"),e.saveProductForm={},e.innerDrawer=!1,e.getActivityProductTableData(e.selectActivityId)):e.$message("保存失败")})},handleAdd:function(){this.dialogMessage="添加活动",this.addOrUpdate=0,this.editVisible=!0},handleProductAdd:function(){this.innerDrawerTittle="添加活动商品",this.productAddOrUpdate=0,this.innerDrawer=!0,this.productDisabled=!1},closeDialog:function(){this.resetForm("saveForm"),this.saveForm={},this.fileLists=[]},resetForm:function(e){this.$refs[e].clearValidate()},getTableData:function(){var e=this,t="activity/listActivity";this.postRequest(t,this.query).then(function(t){t&&200==t.status&&"200"==t.data.status&&(e.tableData=t.data.obj.list,e.pageTotal=t.data.obj.total,e.tableDataLoading=!1)})},getProductList:function(){var e=this,t="product/listUsableProduct";this.postRequest(t,this.query).then(function(t){t&&200==t.status&&"200"==t.data.status&&(e.productList=t.data.obj)})},handleEdit:function(e,t){this.dialogMessage="编辑活动",this.addOrUpdate=1,this.idx=e,this.saveForm=JSON.parse(JSON.stringify(t)),this.fileLists=[{name:"",url:t.pictureUrl}],this.editVisible=!0},handleProductEdit:function(e,t){this.innerDrawerTittle="编辑活动商品",this.productAddOrUpdate=1,this.productDisabled=!0,this.saveProductForm=JSON.parse(JSON.stringify(t)),this.innerDrawer=!0},handleMore:function(e,t){this.selectActivityId=t.id,this.activityProductDrawer=!0,this.innerTableDataLoading=!0,this.getActivityProductTableData(t.id)},getActivityProductTableData:function(e){var t=this;this.productQuery.id=e;var a=this.productQuery,r="/activity/listActivityProduct";this.postRequest(r,a).then(function(e){e&&200==e.status&&"200"==e.data.status&&(t.activityProductList=e.data.obj.list,t.productPageTotal=e.data.obj.total,t.innerTableDataLoading=!1)})},tableHeaderColor:function(e,t){return"background-color:#EBEEF5;"},handlePageChange:function(e){this.tableDataLoading=!0,this.$set(this.query,"pageNum",e),this.getTableData(this.query)},handlePageChangeProduct:function(e){this.innerTableDataLoading=!0,this.$set(this.productQuery,"pageNum",e),this.getActivityProductTableData(this.selectActivityId)},handleSearch:function(){this.getTableData()},handleProductSearch:function(){this.getActivityProductTableData(this.selectActivityId)},resetQuery:function(){this.query.actName=null,this.query.actStatus=null,this.query.flag=null,this.getTableData()},resetProductQuery:function(){this.productQuery.productName=null,this.getActivityProductTableData(this.selectActivityId)},statusFormat:function(e,t){return 0==e.actStatus?"创建":1==e.actStatus?"发布":2==e.actStatus?"下架":void 0},flagFormat:function(e,t){return 0==e.flag?"不需要":1==e.flag?"需要":void 0},dateFormat:function(e,t){return null===e.createTime?null:this.allDateFormat(e.createTime)},startDateFormat:function(e,t){return null===e.startDate?null:this.allDateFormat(e.startDate)},endDateFormat:function(e,t){return null===e.endDate?null:this.allDateFormat(e.endDate)},allDateFormat:function(e){var t=new Date(e),a=t.getMonth()+1<10?"0"+(t.getMonth()+1):t.getMonth()+1,r=t.getDate()<10?"0"+t.getDate():t.getDate(),l=t.getHours()<10?"0"+t.getHours():t.getHours(),i=t.getMinutes()<10?"0"+t.getMinutes():t.getMinutes(),n=t.getSeconds()<10?"0"+t.getSeconds():t.getSeconds(),s=t.getFullYear()+"-"+a+"-"+r+" "+l+":"+i+":"+n;return s},handleRemove:function(e,t){this.fileLists=[]},handlePictureCardPreview:function(e){this.dialogImageUrl=e.url,this.imgDialogVisible=!0},success:function(e,t,a){this.fileLists=[{name:t.name,url:e.url}]},handleExceed:function(e,t){this.$message.warning("请最多上传一个图片。")}}}),n=i,s=(a("45c3"),a("2877")),o=Object(s["a"])(n,r,l,!1,null,"0f000967",null);t["default"]=o.exports},"45c3":function(e,t,a){"use strict";var r=a("1611"),l=a.n(r);l.a},"6c7b":function(e,t,a){"use strict";a.r(t);var r=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticStyle:{"margin-top":"10px"}},[a("div",{staticClass:"container"},[a("div",{staticClass:"handle-box"},[a("el-input",{staticClass:"name-input",attrs:{placeholder:"请输入功能区名称"},model:{value:e.query.moduleName,callback:function(t){e.$set(e.query,"moduleName",t)},expression:"query.moduleName"}}),a("el-select",{staticClass:"status-select",attrs:{placeholder:"请选择功能区状态"},model:{value:e.query.moduleStatus,callback:function(t){e.$set(e.query,"moduleStatus",t)},expression:"query.moduleStatus"}},e._l(e.moduleStatusList,function(e){return a("el-option",{key:e.id,attrs:{label:e.name,value:e.id}})}),1),a("el-button",{attrs:{type:"primary",round:"",icon:"el-icon-search"},on:{click:function(t){return e.handleSearch()}}},[e._v("搜索")]),a("el-button",{attrs:{type:"danger",round:"",icon:"el-icon-refresh"},on:{click:function(t){return e.resetQuery()}}},[e._v("重置")]),a("el-button",{attrs:{type:"primary",round:"",icon:"el-icon-circle-plus-outline"},on:{click:function(t){return e.handleAdd()}}},[e._v("添加")])],1),a("el-table",{directives:[{name:"loading",rawName:"v-loading",value:e.tableDataLoading,expression:"tableDataLoading"}],ref:"multipleTable",staticClass:"table",attrs:{data:e.tableData,"header-cell-style":e.tableHeaderColor,"header-cell-class-name":"table-header"}},[a("el-table-column",{attrs:{label:"序号",type:"index",width:"50",align:"center"}}),a("el-table-column",{attrs:{label:"图片",width:"80px",align:"center"},scopedSlots:e._u([{key:"default",fn:function(e){return[a("el-image",{staticClass:"table-module-img",attrs:{src:e.row.moduleUrl,"preview-src-list":[e.row.moduleUrl]}})]}}])}),a("el-table-column",{attrs:{prop:"moduleName",label:"功能区名称",align:"center","show-overflow-tooltip":!0}}),a("el-table-column",{attrs:{prop:"jumpUrl",label:"跳转地址",align:"center","show-overflow-tooltip":!0}}),a("el-table-column",{attrs:{prop:"moduleStatus",label:"状态",formatter:e.statusFormat,align:"center","show-overflow-tooltip":!0}}),a("el-table-column",{attrs:{prop:"sOrder",label:"排序",align:"center","show-overflow-tooltip":!0}}),a("el-table-column",{attrs:{prop:"createTime",label:"创建时间",formatter:e.dateFormat,align:"center"}}),a("el-table-column",{attrs:{label:"操作",align:"center"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("el-button",{attrs:{type:"primary",icon:"el-icon-edit",circle:""},on:{click:function(a){return e.handleEdit(t.$index,t.row)}}}),a("el-button",{attrs:{type:"danger",icon:"el-icon-delete",circle:""},on:{click:function(a){return e.handleDelete(t.$index,t.row)}}})]}}])})],1),a("div",{staticClass:"pagination"},[a("el-pagination",{attrs:{background:"",layout:"total, prev, pager, next","current-page":e.query.pageNum,"page-size":e.query.pageSize,total:e.pageTotal},on:{"current-change":e.handlePageChange}}),a("el-dialog",{attrs:{title:e.dialogMessage,visible:e.editVisible,center:e.dialogCentr},on:{"update:visible":function(t){e.editVisible=t},close:e.closeDialog}},[a("el-form",{ref:"saveForm",attrs:{rules:e.ruleValidate,model:e.saveForm,inline:!0,"lable-position":e.labelPosition,"label-width":"120px"}},[a("el-form-item",{attrs:{label:"功能区名称",prop:"moduleName"}},[a("el-input",{attrs:{placeholder:"请输入功能区名称","suffix-icon":"“xxxx”"},model:{value:e.saveForm.moduleName,callback:function(t){e.$set(e.saveForm,"moduleName",t)},expression:"saveForm.moduleName"}})],1),a("el-form-item",{attrs:{label:"跳转地址",prop:"jumpUrl"}},[a("el-input",{attrs:{placeholder:"请输入跳转地址","suffix-icon":"“xxxx”"},model:{value:e.saveForm.jumpUrl,callback:function(t){e.$set(e.saveForm,"jumpUrl",t)},expression:"saveForm.jumpUrl"}})],1),a("el-form-item",{attrs:{label:"功能区排序",prop:"sOrder"}},[a("el-input",{attrs:{placeholder:"请输入排序","suffix-icon":"“xxxx”"},model:{value:e.saveForm.sOrder,callback:function(t){e.$set(e.saveForm,"sOrder",t)},expression:"saveForm.sOrder"}})],1),a("el-form-item",{attrs:{label:"功能区状态",prop:"moduleStatus"}},[a("el-select",{attrs:{placeholder:"请选择状态","suffix-icon":"“xxxx”"},model:{value:e.saveForm.moduleStatus,callback:function(t){e.$set(e.saveForm,"moduleStatus",t)},expression:"saveForm.moduleStatus"}},e._l(e.moduleStatusList,function(e){return a("el-option",{key:e.id,attrs:{label:e.name,value:e.id}})}),1)],1),a("el-form-item",{staticStyle:{width:"100%"},attrs:{label:"图片上传",prop:"moduleUrl"}},[a("el-upload",{attrs:{name:"file",limit:1,action:"/admin/upload/file","list-type":"picture-card","file-list":e.fileLists,"on-preview":e.handlePictureCardPreview,"on-success":e.success,"on-remove":e.handleRemove,"on-exceed":e.handleExceed}},[a("i",{staticClass:"el-icon-plus"})]),a("el-dialog",{attrs:{visible:e.imgDialogVisible,size:"full",modal:!1,title:"查看大图片"},on:{"update:visible":function(t){e.imgDialogVisible=t}}},[a("img",{attrs:{width:"60%",src:e.dialogImageUrl,alt:""}})])],1)],1),a("div",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[a("el-button",{attrs:{type:"primary"},on:{click:function(t){return e.saveFuncModule()}}},[e._v("确定")]),a("el-button",{on:{click:function(t){e.editVisible=!1}}},[e._v("取消")])],1)],1)],1)],1)])},l=[],i=(a("7f7f"),{name:"funcModule",data:function(){return{dialogCentr:!0,labelPosition:"left",query:{pageNum:1,pageSize:10},tableData:[],pageTotal:0,moduleStatusList:[{id:0,name:"创建"},{id:1,name:"发布"},{id:2,name:"下架"}],dialogImageUrl:"",imgDialogVisible:!1,fileLists:[],dialogMessage:"",saveForm:{},addOrUpdate:0,editVisible:!1,ruleValidate:{moduleName:[{required:!0,message:"请输入功能区名称",trigger:"blur"}],jumpUrl:[{required:!0,message:"请输入跳转地址",trigger:"blur"}],moduleStatus:[{required:!0,message:"请选择功能区状态",trigger:"change"}],sOrder:[{required:!0,message:"请输入功能区排序",trigger:"blur"}]},tableDataLoading:!0}},created:function(){this.getTableData()},methods:{handleDelete:function(e,t){var a=this;this.$confirm("确定要删除吗？","提示",{type:"warning"}).then(function(){var e="/func/deleteFuncModule",r={id:t.id};a.postRequest(e,r).then(function(e){e&&200==e.status&&"200"==e.data.status?(a.$message.success("删除成功"),a.getTableData()):a.$message("删除失败")})}).catch(function(){})},saveFuncModule:function(){var e=this;this.$refs.saveForm.validate(function(t){if(t){var a="";0==e.addOrUpdate?a="/func/insertFuncModule":1==e.addOrUpdate&&(a="/func/updateFuncModule"),e.saveForm.moduleUrl=e.fileLists[0].url;var r=e.saveForm;e.postRequest(a,r).then(function(t){t&&200==t.status&&"200"==t.data.status?(e.$message.success("保存成功"),e.editVisible=!1,e.getTableData()):e.$message("保存失败")})}})},handleAdd:function(){this.dialogMessage="添加功能区",this.addOrUpdate=0,this.editVisible=!0},closeDialog:function(){this.resetForm("saveForm"),this.saveForm={},this.fileLists=[]},resetForm:function(e){this.$refs[e].clearValidate()},getTableData:function(){var e=this,t="func/listFuncModule";this.postRequest(t,this.query).then(function(t){t&&200==t.status&&"200"==t.data.status&&(e.tableData=t.data.obj.list,e.pageTotal=t.data.obj.total,e.tableDataLoading=!1)})},handleEdit:function(e,t){this.dialogMessage="编辑功能区",this.addOrUpdate=1,this.idx=e,this.saveForm=JSON.parse(JSON.stringify(t)),this.fileLists=[{name:"",url:t.moduleUrl}],this.editVisible=!0},tableHeaderColor:function(e,t){return"background-color:#EBEEF5;"},handlePageChange:function(e){this.tableDataLoading=!0,this.$set(this.query,"pageNum",e),this.getTableData(this.query)},handleSearch:function(){this.getTableData()},resetQuery:function(){this.query.moduleName=null,this.query.moduleStatus=null,this.getTableData()},statusFormat:function(e,t){return 0==e.moduleStatus?"创建":1==e.moduleStatus?"发布":2==e.moduleStatus?"下架":void 0},dateFormat:function(e,t){if(null===e.createTime)return null;var a=new Date(e.createTime),r=a.getMonth()+1<10?"0"+(a.getMonth()+1):a.getMonth()+1,l=a.getDate()<10?"0"+a.getDate():a.getDate(),i=a.getHours()<10?"0"+a.getHours():a.getHours(),n=a.getMinutes()<10?"0"+a.getMinutes():a.getMinutes(),s=a.getSeconds()<10?"0"+a.getSeconds():a.getSeconds(),o=a.getFullYear()+"-"+r+"-"+l+" "+i+":"+n+":"+s;return o},handleRemove:function(e,t){this.fileLists=[]},handlePictureCardPreview:function(e){this.dialogImageUrl=e.url,this.imgDialogVisible=!0},success:function(e,t,a){this.fileLists=[{name:t.name,url:e.url}]},handleExceed:function(e,t){this.$message.warning("请最多上传一个图片。")}}}),n=i,s=(a("f012"),a("2877")),o=Object(s["a"])(n,r,l,!1,null,"57a967fb",null);t["default"]=o.exports},b72c:function(e,t,a){var r={"./OpeActivity.vue":"3efd","./OpeBanner.vue":"289a","./OpeFuncModule.vue":"6c7b"};function l(e){var t=i(e);return a(t)}function i(e){var t=r[e];if(!(t+1)){var a=new Error("Cannot find module '"+e+"'");throw a.code="MODULE_NOT_FOUND",a}return t}l.keys=function(){return Object.keys(r)},l.resolve=i,e.exports=l,l.id="b72c"},f012:function(e,t,a){"use strict";var r=a("20c8"),l=a.n(r);l.a},f022:function(e,t,a){}}]);
//# sourceMappingURL=chunk-32ed8426.36e0364c.js.map